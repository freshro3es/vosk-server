# TODO
- На фронтенде дописать код для адекватного отображения блока с результатом (сейчас убрал свойство display:none в принципе)
- Пофиксить работу `asyncio.run(transcribe())`, чтобы ивентлуп нормально закрывался и сервер не падал из-за коллизии
- Посмотреть, почему из речи пропадают куски в транскрибированном результате (этот факт под сомнением)

# Vosk
**Vosk** — это библиотека для распознавания речи с открытым исходным кодом, которая позволяет выполнять преобразование речи в текст (speech-to-text) локально, без необходимости использования облачных сервисов. Она поддерживает несколько языков и может работать на различных платформах, включая Windows, Linux и macOS. Vosk написан на Python и предоставляет интерфейсы для других языков программирования.
## Основные особенности Vosk:

1. **Локальная работа**: Vosk выполняет все операции локально, что позволяет работать без подключения к интернету.
2. **Многоязыковая поддержка**: Поддержка множества языков и моделей.
3. **Высокая производительность**: Vosk может работать в реальном времени даже на слабых устройствах, таких как Raspberry Pi.
4. **Гибкость**: Легко интегрируется в приложения на различных платформах.

## Сервер

#### Установка Vosk и Flask:

Если вы еще не установили Vosk и Flask, вы можете сделать это с помощью pip:

```bash
pip install vosk
pip install flask
```

Далее есть два разных варианта сервера:
### Языковая модель в контейнере

#### Запуск с базовой моделью

Если мощности сервера достаточно, чтобы работать с базовым образом vosk, то можно просто запустить контейнер командой:

```bash
docker run -d -p 2700:2700 alphacep/kaldi-ru:latest
```

#### Запуск со своей моделью (опционально)

Если нужно запустить докер образ с другой моделью (например, меньше или больше по размеру, чем базовая), то можно прописать при создании контейнера путь к этой модели, как в примере:

```bash
docker run -d -p 2700:2700 -v /home/freshro3es/vosk/vosk-model-small-ru-0.22:/opt/vosk-model-ru/model alphacep/kaldi-ru:latest
```

#### Запустите сервер

Запустите ваш Flask-сервер. Убедитесь, что находитесь в папке вашего проекта, где находится файл с серверным кодом ( `app.py`).

В командной строке (в WSL) выполните:

```bash
python3 app.py
```

После этого Flask-сервер должен запуститься и быть доступен по адресу `http://localhost:5000`.

## Фронтенд

#### Откройте HTML-файл в браузере

Откройте созданный HTML-файл (`index.html`) в вашем браузере. Он доступен по адресу ``http://localhost:5000/`

#### Загрузите аудиофайл и получите результат

1. На открывшейся веб-странице нажмите кнопку "Choose File" (или аналогичную в вашем языке), чтобы выбрать аудиофайл для загрузки.
2. Нажмите кнопку "Upload", чтобы отправить файл на сервер.

#### Проверьте результат

После отправки аудиофайла сервер должен обработать его и вернуть транскрипцию, которая будет отображена на веб-странице в разделе "Transcription Result".